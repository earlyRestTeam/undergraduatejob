<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>Dashoon - Responsive Bootstrap 4 Admin Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="A fully featured admin theme which can be used to build CRM, CMS, etc." name="description" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="/images/favicon.ico">

    <!-- DataTables -->
    <link href="/admin/libs/datatables/dataTables.bootstrap4.min.css" rel="stylesheet" type="text/css"/>
    <link href="/admin/libs/datatables/responsive.bootstrap4.min.css" rel="stylesheet" type="text/css"/>

    <!-- App css -->
    <link href="/admin/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/admin/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link href="/admin/css/app.min.css" rel="stylesheet" type="text/css" />

</head>

<body>

<!-- Begin page -->
<div id="wrapper">

    <!-- Topbar Start -->
    <div class="navbar-custom">
        <ul class="list-unstyled topnav-menu float-right mb-0">
            <!--显示未处理消息数...，选做-->

            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle waves-effect waves-light" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <i class="dripicons-bell noti-icon"></i>
                    <span class="badge badge-danger noti-icon-badge" name="sum" id="sum" th:text="${sum}"></span>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-lg">

                    <div class="slimscroll noti-scroll">

                        <!-- item-->
                        <a href="/admin/authentication-company" class="dropdown-item notify-item">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <span class="notify-details" name="autCompanies" id="autCompanies" th:text="${autCompanies}"></span>
                        </a>

                        <a href="/admin/authentication-student" class="dropdown-item notify-item active">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <span class="notify-details" name="autStudents" id="autStudents" th:text="${autStudents}"></span>
                        </a>

                        <a href="/admin/audit-job" class="dropdown-item notify-item">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <span class="notify-details" name="jobs" id="jobs" th:text="${jobs}"></span>
                        </a>

                        <a href="/admin/audit-resume" class="dropdown-item notify-item">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <span class="notify-details" name="resumes" id="resumes" th:text="${resumes}"></span>
                        </a>

                        <a href="/admin/complaint" class="dropdown-item notify-item">
                            <div class="notify-icon bg-warning">
                                <i class="mdi mdi-alert-outline"></i>
                            </div>
                            <span class="notify-details" name="complaints" id="complaints" th:text="${complaints}"></span>
                        </a>

                    </div>

                </div>
            </li>
            <!--显示未处理消息数...，选做-->
            <!--头像...-->
            <li class="dropdown notification-list">
                <a class="nav-link dropdown-toggle nav-user mr-0 waves-effect waves-light" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <img src="/admin/images/users/avatar-1.jpg" alt="user-image" class="rounded-circle">
                    <span class="pro-user-name ml-1">
                        Devid <i class="mdi mdi-chevron-down"></i>
                    </span>
                </a>
                <div class="dropdown-menu dropdown-menu-right profile-dropdown ">
                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h6 class="m-0">
                            Hello, Devid !
                        </h6>
                    </div>

                    <div class="dropdown-divider"></div>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <i class="dripicons-power"></i>
                        <span>Logout</span>
                    </a>

                </div>
            </li>
            <!--头像...-->
        </ul>

        <ul class="list-unstyled menu-left mb-0">
            <li class="float-left">
                <a href="index" class="logo">
                            <span class="logo-lg">
                                <img src="/admin/images/logo.png" alt="" height="25">
                            </span>
                    <span class="logo-sm">
                                <img src="/admin/images/logo-sm.png" alt="" height="24">
                            </span>
                </a>
            </li>
            <li class="float-left">
                <a class="button-menu-mobile navbar-toggle">
                    <div class="lines">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </a>
            </li>

        </ul>
    </div>
    <!-- end Topbar -->


</div>
    <!-- Left Sidebar End -->

    <!-- ============================================================== -->
    <!-- Start Page Content here -->
    <!-- ============================================================== -->

    <div class="content-page">
        <div class="content">

            <!-- Start Content-->
            <div class="container-fluid">

                <!-- start page title -->
                <div class="row">
                    <div class="col-12">
                        <div class="page-title-box">
                            <div class="page-title-right">
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">主页</a></li>
                                    <li class="breadcrumb-item active">用户管理</li>
                                    <li class="breadcrumb-item active">学生管理</li>
                                </ol>
                            </div>
                            <h4 class="page-title">学生管理</h4>
                        </div>
                    </div>
                </div>
                <!-- end page title -->
                <div class="row">
                    <div class="col-xl-12 stretch-card">
                        <div class="card-box">

                            <h4 class="header-title mb-4">用户表</h4>
                            <div >
                                <div  class="form-inline" style="float: right">
                                    <input id="name" type="text" class="form-control" placeholder="用户名" name="username">
                                    <input id="type" type="text" class="form-control" placeholder="昵称" name="nickName">
                                    <select onchange="fn()" type="text" class="form-control" style="width:188px" placeholder="VIP服务" id="vip" name="userVip">
                                        <option value="" th:selected="${userVip eq 0}">全部用户</option>
                                        <option value="0" th:selected="${userVip eq 0}">普通用户</option>
                                        <option value="1" th:selected="${userVip eq 1}">VIP用户</option>
                                    </select>
                                    <select onchange="fn()" type="text" class="form-control" style="width:188px" placeholder="状态" id="status" name="status">
                                        <option value="" th:selected="${status eq 0}">全部</option>
                                        <option value="0" th:selected="${status eq 0}">冻结</option>
                                        <option value="1" th:selected="${status eq 1}">启用</option>
                                    </select>
                                    <button id="btn1" th:onclick="'query(1)'" style="background-color: lightskyblue;height: 38px;width: 38px;border: lightskyblue;" class=""><i class="fa fa-search"></i></button>
                                    <!--</form>-->
                                </div>
                            </div>

                            <div id="myModal" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel">VIP</h4>
                                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                                        </div>
                                        <div class="modal-body">
                                            <h5>VIP生效时间</h5>
                                            <hr>
                                            <p id="time"></p>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-primary waves-effect waves-light" data-dismiss="modal">确定</button>
                                            <!--<button type="button" class="btn btn-light waves-effect"></button>-->
                                        </div>
                                    </div><!-- /.modal-content -->
                                </div><!-- /.modal-dialog -->
                            </div>

                            <div class="table-responsive" th:fragment="table" id="table">
                                <table class="table table-centered table-hover mb-0">
                                    <thead>
                                    <tr>
                                        <th class="border-top-0">ID</th>
                                        <th class="border-top-0">头像</th>
                                        <th class="border-top-0">用户名</th>
                                        <th class="border-top-0">昵称</th>
                                        <th class="border-top-0">邮箱</th>
                                        <th class="border-top-0">手机号码</th>
                                        <th class="border-top-0">VIP服务</th>
                                        <th class="border-top-0">创建时间</th>
                                        <th class="border-top-0">状态</th>
                                        <th class="border-top-0 text-center">操作</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:id="${user.id}" th:each="user,adStas:${pages.list}">
                                        <td th:text="${user.id}"></td>
                                        <td th:text="${user.avatar}"></td>
                                        <td th:text="${user.username}"></td>
                                        <td th:text="${user.nickName}"></td>
                                        <td th:text="${user.email}"></td>
                                        <td th:text="${user.phone}"></td>
                                        <td class="td-status" th:if="${user.userVip eq 0}"><span class="badge badge-secondary">普通用户</span></td>
                                        <td class="td-status" th:if="${user.userVip eq 1}"><span class="badge badge-primary">VIP用户</span></td>
                                        <!--<button type="button" class="btn btn-primary waves-effect waves-light" th:onclick="'load_pic('+${aut.id}+')'">图片详情</button>-->
                                        <td th:text="${#dates.format(user.createTime,'yyyy-MM-dd')}">
                                        <td class="td-status" th:if="${user.status eq 0}"><span class="badge badge-danger">冻结</span></td>
                                        <td class="td-status" th:if="${user.status eq 1}"><span class="badge badge-success">启用</span></td>
                                        <td class="text-center">
                                            <a th:if="${user.status eq 0}" th:onclick="'article_shenhe('+${user.id}+','+${user.status}+')'" class="badge-info btn-sm mg-y-5" data-toggle="tooltip" data-placement="top" title="" data-original-title="启用"><i class="mdi dripicons-plus"></i></a>
                                            <a th:if="${user.status eq 1}" th:onclick="'article_shenhe('+${user.id}+','+${user.status}+')'" class="badge-danger btn-sm mg-y-5" data-toggle="tooltip" data-placement="top" title="" data-original-title="冻结"><i class="mdi mdi-trash-can"></i></a>
                                        </td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>

                        </div> <!-- end card-box-->
                    </div> <!-- end col-->
                </div> <!-- end row -->

            </div> <!-- container -->

        </div> <!-- content -->

        <!-- Footer Start -->
        <footer class="footer">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12 text-center">
                        2019 © Dashboard Theme By <a href="#">Dashoon</a>
                    </div>
                </div>
            </div>
        </footer>


    </div>

    <!-- ============================================================== -->
    <!-- End Page content -->
    <!-- ============================================================== -->

</div>
<!-- END wrapper -->

<!-- Vendor js -->
<script src="/admin/js/vendor.min.js"></script>

<!-- KNOB JS -->
<script src="/admin/libs/jquery-knob/jquery.knob.min.js"></script>
<!-- Chart JS -->
<script src="/admin/libs/chart-js/Chart.bundle.min.js"></script>
<!-- DatePicker JS -->
<script src="/admin/libs/bootstrap-datepicker/bootstrap-datepicker.min.js"></script>

<!-- Datatable js -->
<script src="/admin/libs/datatables/jquery.dataTables.min.js"></script>
<script src="/admin/libs/datatables/dataTables.bootstrap4.min.js"></script>
<script src="/admin/libs/datatables/dataTables.responsive.min.js"></script>
<script src="/admin/libs/datatables/responsive.bootstrap4.min.js"></script>

<script src="/admin/libs/datatables/dataTables.buttons.min.js"></script>
<script src="/admin/libs/datatables/buttons.bootstrap4.min.js"></script>
<script src="/admin/libs/datatables/buttons.html5.min.js"></script>
<script src="/admin/libs/datatables/buttons.flash.min.js"></script>
<script src="/admin/libs/datatables/buttons.print.min.js"></script>

<script src="/admin/libs/datatables/dataTables.keyTable.min.js"></script>
<script src="/admin/libs/datatables/dataTables.select.min.js"></script>

<script src="/admin/libs/custombox/custombox.min.js"></script>

<!-- Dashboard Init JS -->
<!--<script src="/admin/js/pages/datatables.init.js"></script>-->
<script src="/admin/js/pages/dashboard.init.js"></script>

<!-- App js -->
<script src="/admin/js/app.min.js"></script>
<script src="/js/axios.js"></script>
<script>
    $(document).ready(function(){
        console.log("页面加载完毕后运行");
        messages();
    })

    function messages() {
        $.post("/admin/message",function(result){
            console.log(result.data);
            $('#sum').text(result.data.sum);
            $('#autCompanies').text('您有'+result.data.autCompanies+'条企业认证信息未处理');
            $('#autStudents').text('您有'+result.data.autStudents+'条学生认证信息未处理');
            $('#jobs').text('您有'+result.data.jobs+'条职位审核信息未处理');
            $('#resumes').text('您有'+result.data.resumes+'条简历审核信息未处理');
            $('#complaints').text('您有'+result.data.complaints+'条投诉信息未处理');
        })
    }

    /*选择状态*/
    function  fn(){
        //var     name=$("#item1").find("option:selected").text(); //获取文本值
        var     name=$("#item1").find("option:selected").val();  //获取value值
        if(name !==null){
            version=name;
        }
    }

    function query(indexpage) {
        var username = $("#name").val();
        var nickName = $("#type").val();
        var userVip = $("#vip").val();
        var status = $("#status").val();

        $.ajax({
            url:"/managerUser/query_student",
            type:"POST",
            data:{
                "username":username ,
                "nickName":nickName,
                "userVip":userVip,
                "status":status,
                "indexpage":indexpage
            },
            success: function (data) {
                $("#table").html(data);
            }
        });

    }

    //显示vip开始时间-结束时间
    function showVIPTime(startTime,endTime){
        $("#time").html(startTime+"-"+endTime);
        $("#myModal").modal('show');
    }
    //确认更改状态
    function article_shenhe(id,status){
        if (confirm("确认更改状态?")) {
            self.location = "/managerUser/update_student_status?id="+id+"&status="+status;
        }
    }
</script>


</body>
</html>